{% extends 'base.html' %}
{% block title %}Stock Sage - 홈{% endblock %}
{% load humanize %}
{% block content %}
<body>
    <div class="container">
        <div class="content-wrap">
            <div class="main-content">
                <div class="tab-header">
                    <div class="tab" id="tab1" onclick="switchTab('content1')">코스피</div>
                   
                </div>
                <div class="highlight-bar"></div>
                <div class="chart-container">
                    <div class="chart">
                        <img class="chart_image" src="data:image/png;base64,{{ img_base64 }}" alt="KOSPI Chart" style="width:100%">
                    </div>
                </div>
                <div class="chart-info">
                    <div class="legend">
                        <div class="legend-box legend-kospi"></div>
                       
                    </div>
                    <div class="legend">
                        <div class="legend-box legend-event"></div>
                      
                    </div>
                </div>
                <div class="tab-footer-container">
                    <div class="tab-footer" id="tab-left" onclick="moveLeft()">왼쪽</div>
                    <div class="tab-footer" id="tab-right" onclick="moveRight()">오른쪽</div>
                </div>
            </div>
            <div class="sidebar">
                <div class="sidebar-section sidebar-top">
                    <div class="top-content">
                        <h2>인기검색종목</h2>
                        <div class="top-stocks">
                            <div class="stock-item">삼성전자 <span class="stock-price">76,700</span></div>
                            <div class="stock-item">SK하이닉스 <span class="stock-price">110,000</span></div>
                            <div class="stock-item">LG전자 <span class="stock-price">70,500</span></div>
                            <div class="stock-item">현대차 <span class="stock-price">160,000</span></div>
                            <div class="stock-item">기아 <span class="stock-price">82,500</span></div>
                        </div>
                    </div>
                    <div class="bottom-content">
                        <h2>글로벌지수</h2>
                        <div class="global-indexes">
                            <div class="index-item">다우존스 <span class="index-value">34,000</span></div>
                            <div class="index-item">나스닥 <span class="index-value">14,000</span></div>
                            <div class="index-item">S&amp;P500 <span class="index-value">4,500</span></div>
                            <div class="index-item">상해종합 <span class="index-value">3,500</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="additional-content">
            <div class="recent-actions">
                <div class="recent-list">
                    <div class="recent-title">최근 검색 종목</div>
                    <div class="recent-search-box">삼성전자, LG전자, 현대차</div>
                    <div class="bookmark-form">
                        <button class="bookmark-button">북마크</button>
                    </div>
                </div>
            </div>
            <div class="stock-tabs">
                <div class="stock-tab">
                    <div class="stock-tab-title">주가 상승률 상위</div>
                    <div class="stock-table">
                        <div class="stock-table-header">
                            <span class="header-name">종목명</span>
                            <span class="header-ratio">상승률</span>
                            <span class="header-chart">차트</span>
                        </div>
                        {% for s in top_10_stocks %}
                        <div class="stock-details">
                            <span><a href="{% url 'info' %}?ticker={{ s.code }}">{{ s.name }}</a></span>
                            <span class="{% if s.change > 0 %}change-positive{% else %}change-negative{% endif %}">
                                {% if s.change > 0 %}
                                +{{ s.chagesRatio }}
                                {% else %}
                                {{ s.chagesRatio }}
                                {% endif %}
                            </span>
                            <div class="bar-container">
                            <div class="bar" style="width:{{s.chagesRatio}}"></div>
                          

                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="stock-tab">
                    <div class="stock-tab-title">주가 하락률 상위</div>
                    <div class="stock-table">
                        <div class="stock-table-header">
                            <span class="header-name">종목명</span>
                            <span class="header-ratio">하락률</span>
                            <span class="header-chart">차트</span>
                        </div>
                        {% for s in row_10_stocks %}
                        <div class="stock-details">
                            <span><a href="{% url 'info' %}?ticker={{ s.code }}">{{ s.name }}</a></span>
                            <span class="{% if s.chagesRatio > 0 %}change-positive{% else %}change-negative{% endif %}">
                                {% if s.chagesRatio > 0 %}
                                +{{ s.chagesRatio }}%
                                {% else %}
                                {{ s.chagesRatio }}%
                                {% endif %}
                            </span>
                            <div class="bar-container">
                            <div class="bar" style="width:{{s.chagesRatio}}"></div>
                      

                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="stock-tab">
                    <div class="stock-tab-title">시가총액 상위</div>
                    <div class="stock-table">
                        <div class="stock-table-header">
                            <span class="header-name">종목명</span>
                            <span class="header-ratio">변동률</span>
                            <span class="header-marcap">시가총액</span>
                        </div>
                        {% for s in top_10_tot %}
                        <div class="stock-details">
                            <span><a href="{% url 'info' %}?ticker={{ s.code }}">{{ s.name }}</a></span>
                            <span class="{% if s.chagesRatio > 0 %}change-positive{% else %}change-negative{% endif %}">
                                {% if s.chagesRatio > 0 %}
                                +{{ s.chagesRatio }}%
                                {% elif s.chagesRatio < 0 %}
                                {{ s.chagesRatio }}%
                                {% else %}
                                {{ s.chagesRatio }}%
                                {% endif %}
                            </span>
                             <td>{{ s.marcap_won|intcomma }}₩</td>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="market-trend">
                <div class="market-section">
                    <div class="market-section-title">업종별 시세</div>
                    <div class="stock-table">
                        <div class="stock-table-header">
                            <span class="header-sectore">섹터명</span>
                            <span class="header-change">변화율</span>
                             <span class="header-order">주도주</span>
                        </div>
                        {% for s in sectors_data %}
        <div class="stock-details">
           
            <span><a href="{% url 'sector_detail' s.Sector %}">{{ s.Sector }}</a></span>
            <span class="{% if s.ChagesRatio > 0 %}change-positive{% else %}change-negative{% endif %}">
                {% if s.ChagesRatio > 0 %}
                    +{{ s.ChagesRatio|floatformat:2 }}%
                {% else %}
                    {{ s.ChagesRatio|floatformat:2 }}%
                {% endif %}
            </span>
            <span>{{ s.Name }}</span>
        </div>
        {% endfor %}
    </div>
</div>
              <!-- 테마별 시세 -->
<div class="market-section">
    <div class="market-section-title">테마별 시세</div>
    <div class="stock-table">
        <div class="stock-table-header">
            <span class="header-name">테마명</span>
            <span class="header-ratio">변화율</span>
            <span class="header-order">주도주</span>
        </div>
        {% for s in industries_data %}
        <div class="stock-details">
            <span><a href="{% url 'industry_detail' s.Industry %}">{{ s.Industry }}</a></span>
            <span class="{% if s.ChagesRatio > 0 %}change-positive{% else %}change-negative{% endif %}">
                {% if s.ChagesRatio > 0 %}
                    +{{ s.ChagesRatio|floatformat:2 }}%
                {% else %}
                    {{ s.ChagesRatio|floatformat:2 }}%
                {% endif %}
            </span>
            <span>{{ s.Name }}</span>
        </div>
        {% endfor %}
    </div>
</div>

            <div class="exchange-rate">
                <div class="exchange-title">환율 정보</div>
                <table class="exchange-table">
                    <thead>
                        <tr>
                            <th>통화</th>
                            <th>매매기준율</th>
                            <th>변동률</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>USD/KRW</td>
                            <td>1,200</td>
                            <td>+0.50%</td>
                        </tr>
                        <tr>
                            <td>EUR/KRW</td>
                            <td>1,400</td>
                            <td>+0.30%</td>
                        </tr>
                        <tr>
                            <td>JPY/KRW</td>
                            <td>1,100</td>
                            <td>-0.20%</td>
                        </tr>
                        <tr>
                            <td>CNY/KRW</td>
                            <td>180</td>
                            <td>+0.10%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>

{% endblock %}
